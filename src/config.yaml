# Default Configuration for Market-Aware Trading Bot
# This file contains default settings that apply to all accounts
# Account-specific config files (account1/config.yaml, etc.) will override these settings

# Timezone for all log timestamps (default: US/Pacific)
# Common options: US/Pacific, US/Eastern, UTC, Europe/London
timezone: "US/Pacific"

# Check interval in seconds (how often to check both market trend and trading signals)
check_interval: 60

# Market trend configuration (using higher timeframe PP SuperTrend as bull/bear indicator)
market:
  indicator: ppsupertrend  # Use PP SuperTrend for market direction
  timeframe: H3            # 3-hour timeframe for market trend

# Signal detection configuration
signal:
  # Use only closed candles for signal detection (recommended for live trading)
  # true  = Use second-to-last candle (last CLOSED candle) - no repainting, consistent signals
  # false = Use last candle (might be incomplete) - faster signals but may repaint/disappear
  use_closed_candles_only: true

# Stop loss configuration
stoploss:
  type: PPSuperTrend      # Trailing stop using PP SuperTrend from trading timeframe
  spread_buffer_pips: 3   # Additional buffer in pips when use_spread_adjustment=True (default: 3)
  
# Risk/Reward configuration for take profit
# Based on market trend (bull/bear) and position direction  
risk_reward:
  bear_market:
    # During bear markets, favor short positions
    short_rr: 2.0         # Take profit at 1.2 R:R for short positions
    long_rr: 0.8          # Take profit at 0.6 R:R for long positions (small profit)
  bull_market:
    # During bull markets, favor long positions  
    short_rr: 0.8         # Take profit at 0.6 R:R for short positions (small profit)
    long_rr: 2.0          # Take profit at 1.2 R:R for long positions

# Position sizing configuration based on market trend
position_sizing:
  use_dynamic: true
  disable_opposite_trade: true  # if 3H PP SuperTrend sign is bear/bull, the bot will skip trade when 5mins/15mins's pp sign is LONG/SHORT
  bear:  # Bear market (3H PP SuperTrend signal)
    short_risk_per_trade: 300   # If 5min/15min PP sign is SHORT, risk $300 per trade
    long_risk_per_trade: 100    # If 5min/15min PP sign is LONG, risk $100 per trade
  bull:  # Bull market (3H PP SuperTrend signal)
    short_risk_per_trade: 100   # If 5min/15min PP sign is SHORT, risk $100 per trade
    long_risk_per_trade: 300    # If 5min/15min PP sign is LONG, risk $300 per trade
  
# Scalping strategy configuration
# Re-enters at signal price after TP hit within a defined time window
scalping:
  enabled: false  # Default disabled, enable per-account in account1/config.yaml
  time_window:
    start: "20:00"  # 8 PM (scalping window start)
    end: "10:00"    # 8 AM next day (scalping window end)
    timezone: "America/Los_Angeles"  # Pacific Time
  re_entry:
    use_limit_orders: true  # Use limit orders for re-entry (recommended)
    price_buffer_pips: 0.5  # Buffer for limit order price
  max_entries_per_signal: 0  # 0 = unlimited re-entries within time window

# Backtest configuration
backtest:
  initial_balance: 10000  # Default starting balance for backtests

# News calendar filter configuration
# Pauses trading and closes positions before high-impact economic news events
news_filter:
  enabled: false  # Default disabled, enable per-account in account1/config.yaml
  enabled_log: true  # Log news events during trade to CSV (doesn't affect trading behavior)

  # Timing buffers (how long before/after news to pause trading)
  pre_news_buffer_minutes: 10   # Close positions & pause X mins before news
  post_news_buffer_minutes: 15  # Resume trading X mins after news

  # OANDA Calendar API settings
  # NOTE: OANDA ForexLabs Calendar API may be unavailable in some regions.
  # If disabled or API fails, use the manual_events_file instead.
  oanda_calendar:
    enabled: false            # Set to true to try OANDA ForexLabs API
    instrument: EUR_USD       # Filter events affecting this pair
    period: 2592000           # 30 days lookahead (seconds)
    cache_ttl: 3600           # Cache events for 1 hour (seconds)

  # Manual event file (backup if OANDA misses events)
  # Set to "{account}/news_events.json" to enable, or null to disable
  manual_events_file: "{account}/news_events.json"

  # Event filtering by impact level
  # OANDA uses: 1=low, 2=medium, 3=high
  impact_levels:
    - 3  # High impact only

  # Event keywords to filter (case-insensitive match against event title)
  # Only events matching these keywords will trigger the filter
  event_keywords:
    # Fed/Central Bank
    - "FOMC"
    - "Fed Meeting"
    - "Federal Reserve"
    - "Interest Rate Decision"
    - "ECB"
    - "Bank of England"
    # Inflation
    - "CPI"
    - "Consumer Price Index"
    - "Core CPI"
    - "PPI"
    - "Producer Price Index"
    - "PCE"
    - "Personal Consumption"
    - "Inflation"
    # Employment
    - "Non-Farm Payrolls"
    - "NFP"
    - "Unemployment Rate"
    - "Jobless Claims"
    - "Employment Change"
    - "ADP Employment"
    # Economic Growth
    - "GDP"
    - "Gross Domestic Product"
    - "Retail Sales"
    - "ISM Manufacturing"
    - "ISM Services"

  # Currency filter (events affecting these currencies)
  currencies:
    - EUR
    - USD

  # Actions
  close_positions_before_news: true   # Auto-close open positions before news
  log_blocked_trades: true            # Log when trades are blocked by news

# Take profit milestone tracking (for market analysis)
# Records profit amount and timestamp when each R:R milestone is first reached
track_take_profit:
  enable: true
  range: [0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2.0, 2.2, 2.5, 2.9]

# Optional: ATR and Pivot parameters
# indicators:
#   pivot_period: 2
#   atr_period: 10
#   atr_factor: 3.0